@model DistributionUpdateToolWeb.ViewModels.ClientViewModel
@{ 
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<h2>@Model.Client.Name</h2>
@Html.ActionLink("Edit", "Edit", new { id = Model.Client.Id }, new { @class = "btn btn-primary" })

<table class="table table-responsive table-hover">
    <thead>
        <tr>
            <th scope="col">Client Distribution</th>
            <th scope="col">Controls</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var email in Model.EmailAddresses)
        {
        <tr>
            <td>@email.Email</td>
            <td>
                @Html.ActionLink("Edit", "EditEmailAddress", new { id = email.Id }) | @Html.ActionLink("Delete", "DeleteEmailAddress", new { id = email.Id, clientId = Model.Client.Id }, new { @id = "deleteEmail"})
            </td>
        </tr>
        }
    </tbody>

</table>

<script>
$(document).ready(function() {
  $('#deleteEmail').click(function() {
    if (confirm('Do you want to delete this email address?')) {
      var url = $(this).attr('href');
      $('#content').load(url);
    }
  });
});
</script>

